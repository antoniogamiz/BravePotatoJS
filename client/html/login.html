<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title> Oribu </title>
        <link rel="stylesheet" type="text/css" href="/client/css/login.css">   
        <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    </head>
        <body>
            <div class="login-container">
                <div class="login-box">
                    <img class="avatar" alt="avatar" src="/client/img/avatar.png">
                    <h1>Login Here</h1>
                    <form method="post" action="/login">
                        <p>Username</p>
                        <input type="text" name="username" id="username-input" placeholder="Enter Username" >
                        <p>Password</p>
                        <input type="password" name="password" id="password-input" placeholder="Enter Password" >
                        
                        <button type="submit" id="sign-in" name="signin">Sign In</button>
                        <button type="submit" id="sign-up" name="signup">Sign Up</button>
                        <a href="#">Forget Password</a>    
                    </form>
                </div>

                <p id="sign-response-text"></p>
            </div>
            <script>
            var socket = io();
            
            //sign
            var inputUsername = document.getElementById("username-input");
            var inputPassword = document.getElementById("password-input");
            
            var signInButton = document.getElementById("sign-in");
            var signUpButton = document.getElementById("sign-up");
            
            var signTextResponse = document.getElementById("sign-response-text");
            //signin-signup handlers
            signInButton.onclick = function(){
                socket.emit('signIn', {username: inputUsername.value, password: inputPassword.value});
            }
            
            signUpButton.onclick = function(){
                socket.emit('signUp', {username: inputUsername.value, password: inputPassword.value});
            }
            
            var updateText = function(display, msg){
                signTextResponse.style.display = display;
                signTextResponse.innerHTML = msg;
            }

            socket.on('signInResponse', function(data){
                if(data.success){
                    updateText("block", "Sign-in successful");
                }
                else{
                    updateText("block", "Sign-in unsuccessful");
                }
            });

            socket.on('signUpResponse', function(data){
                if(data.success){
                    updateText("block", "Sign-un successful");
                }
                else{
                    updateText("block", "Sign-up unsuccessful");
                }
            });
        </script>
        </body>
</html>